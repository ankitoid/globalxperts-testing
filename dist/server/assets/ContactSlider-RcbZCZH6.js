import{jsxs as t,Fragment as w,jsx as e}from"react/jsx-runtime";import{useState as n,useEffect as N}from"react";import{useForm as v}from"react-hook-form";import{MdOutlineSupportAgent as S}from"react-icons/md";const I=()=>{const[p,i]=n(!1),[o,c]=n(!1),[d,a]=n(""),g="6LfeY00rAAAAAPGTPS3gr0KXyDismzqgpeoNivZU",{register:r,handleSubmit:h,reset:f,formState:{errors:s}}=v(),[x,b]=n(!1);return N(()=>{const l=setInterval(()=>{window.grecaptcha&&window.grecaptcha.execute&&(b(!0),clearInterval(l))},500);return()=>clearInterval(l)},[]),t(w,{children:[e("div",{onClick:()=>i(!0),className:"fixed bottom-4 right-4 lg:right-4 py-2 px-2 bg-greenCustomColor2 text-white p-3 rounded-lg cursor-pointer z-50 flex items-center justify-center transition-all duration-300 ease-in-out",children:e(S,{size:35})}),e("div",{className:`fixed top-20 right-0 z-50 transition-transform duration-300 ease-in-out ${p?"translate-x-16 p-8 block md:translate-x-[0px]":"translate-x-full"} w-[450px] 2xl:w-[450px]`,children:t("div",{className:"bg-white p-6 shadow-lg rounded-lg flex flex-col mr-20",children:[t("div",{className:"flex justify-between items-center mb-4",children:[e("h2",{className:"text-lg font-semibold text-purple-600",children:"Contact Form"}),e("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"Ã—"})]}),t("form",{onSubmit:h(async l=>{if(!x){a("reCAPTCHA is not ready yet, please wait.");return}c(!0),a("");try{const u=await window.grecaptcha.execute(g,{action:"submit"}),m=await fetch("https://gxi-backend.globalxperts.net.in/api/ContactSlider",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,captchaToken:u})}),y=await m.json();m.ok?(a("Your message has been sent successfully!"),f()):a(y.error||"Something went wrong. Please try again.")}catch{a("Server error. Please try again later.")}finally{c(!1)}}),children:[t("div",{className:"mb-4",children:[e("input",{type:"text",placeholder:"Name*",...r("name",{required:"Name is required"}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300"}),s.name&&e("p",{className:"text-red-500 text-sm",children:s.name.message})]}),t("div",{className:"mb-4 flex space-x-2",children:[e("input",{type:"text",...r("countryCode"),defaultValue:"+91",placeholder:"+91",className:"w-16 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300 text-center"}),e("input",{type:"tel",placeholder:"Phone",...r("phone"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300"})]}),t("div",{className:"mb-4",children:[e("input",{type:"email",placeholder:"Email*",...r("email",{required:"Email is required",pattern:{value:/^\S+@\S+\.\S+$/,message:"Enter a valid email"}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300"}),s.email&&e("p",{className:"text-red-500 text-sm",children:s.email.message})]}),e("div",{className:"mb-1",children:e("textarea",{placeholder:"Message",...r("message"),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-300",rows:"1"})}),e("div",{className:"flex items-start mb-3",children:t("label",{className:"ml-2 text-sm text-black",children:[e("input",{type:"checkbox",...r("isAgreed"),className:"w-4 h-4 text-blue-500 focus:ring-blue-500 mr-1"}),"I agree to the"," ",e("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline hover:text-blue-700 ",children:"Privacy Policy"}),"."]})}),e("button",{type:"submit",disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg w-full transition-all duration-200",children:o?"Sending...":"Submit"}),d&&e("p",{className:"text-center mt-2 text-sm text-gray-600",children:d})]})]})})]})};export{I as default};
