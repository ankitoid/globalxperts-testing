import*as d from"react";import"react-dom";import{UNSAFE_NavigationContext as _,useHref as Y,useNavigate as J,useLocation as I,useResolvedPath as U,createPath as k,UNSAFE_DataRouterStateContext as Q,UNSAFE_useRouteId as Z,UNSAFE_RouteContext as $,UNSAFE_DataRouterContext as ee}from"react-router";import{stripBasename as S,UNSAFE_warning as j,UNSAFE_invariant as g,matchPath as W,joinPaths as te}from"@remix-run/router";/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N(){return N=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},N.apply(this,arguments)}function K(e,n){if(e==null)return{};var r={},i=Object.keys(e),t,a;for(a=0;a<i.length;a++)t=i[a],!(n.indexOf(t)>=0)&&(r[t]=e[t]);return r}const L="get",F="application/x-www-form-urlencoded";function A(e){return e!=null&&typeof e.tagName=="string"}function ne(e){return A(e)&&e.tagName.toLowerCase()==="button"}function re(e){return A(e)&&e.tagName.toLowerCase()==="form"}function ie(e){return A(e)&&e.tagName.toLowerCase()==="input"}function ae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oe(e,n){return e.button===0&&(!n||n==="_self")&&!ae(e)}let R=null;function le(){if(R===null)try{new FormData(document.createElement("form"),0),R=!1}catch{R=!0}return R}const se=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V(e){return e!=null&&!se.has(e)?(process.env.NODE_ENV!=="production"&&j(!1,'"'+e+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+F+'"')),null):e}function ue(e,n){let r,i,t,a,l;if(re(e)){let s=e.getAttribute("action");i=s?S(s,n):null,r=e.getAttribute("method")||L,t=V(e.getAttribute("enctype"))||F,a=new FormData(e)}else if(ne(e)||ie(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||s.getAttribute("action");if(i=u?S(u,n):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||L,t=V(e.getAttribute("formenctype"))||V(s.getAttribute("enctype"))||F,a=new FormData(s,e),!le()){let{name:o,type:p,value:h}=e;if(p==="image"){let v=o?o+".":"";a.append(v+"x","0"),a.append(v+"y","0")}else o&&a.append(o,h)}}else{if(A(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=L,i=null,t=F,l=e}return a&&t==="text/plain"&&(l=a,a=void 0),{action:i,method:r.toLowerCase(),encType:t,formData:a,body:l}}const ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],de=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],me="6";try{window.__reactRouterVersion=me}catch{}const q=d.createContext({isTransitioning:!1});process.env.NODE_ENV!=="production"&&(q.displayName="ViewTransition");const pe=d.createContext(new Map);process.env.NODE_ENV!=="production"&&(pe.displayName="Fetchers");process.env.NODE_ENV;const he=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z=d.forwardRef(function(n,r){let{onClick:i,relative:t,reloadDocument:a,replace:l,state:s,target:u,to:o,preventScrollReset:p,viewTransition:h}=n,v=K(n,ce),{basename:x}=d.useContext(_),w,y=!1;if(typeof o=="string"&&ve.test(o)&&(w=o,he))try{let m=new URL(window.location.href),f=o.startsWith("//")?new URL(m.protocol+o):new URL(o),C=S(f.pathname,x);f.origin===m.origin&&C!=null?o=C+f.search+f.hash:y=!0}catch{process.env.NODE_ENV!=="production"&&j(!1,'<Link to="'+o+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let E=Y(o,{relative:t}),b=be(o,{replace:l,state:s,target:u,preventScrollReset:p,relative:t,viewTransition:h});function c(m){i&&i(m),m.defaultPrevented||b(m)}return d.createElement("a",N({},v,{href:w||E,onClick:y||a?i:c,ref:r,target:u}))});process.env.NODE_ENV!=="production"&&(z.displayName="Link");const we=d.forwardRef(function(n,r){let{"aria-current":i="page",caseSensitive:t=!1,className:a="",end:l=!1,style:s,to:u,viewTransition:o,children:p}=n,h=K(n,fe),v=U(u,{relative:h.relative}),x=I(),w=d.useContext(Q),{navigator:y,basename:E}=d.useContext(_),b=w!=null&&Re(v)&&o===!0,c=y.encodeLocation?y.encodeLocation(v).pathname:v.pathname,m=x.pathname,f=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(m=m.toLowerCase(),f=f?f.toLowerCase():null,c=c.toLowerCase()),f&&E&&(f=S(f,E)||f);const C=c!=="/"&&c.endsWith("/")?c.length-1:c.length;let D=m===c||!l&&m.startsWith(c)&&m.charAt(C)==="/",M=f!=null&&(f===c||!l&&f.startsWith(c)&&f.charAt(c.length)==="/"),P={isActive:D,isPending:M,isTransitioning:b},H=D?i:void 0,O;typeof a=="function"?O=a(P):O=[a,D?"active":null,M?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let X=typeof s=="function"?s(P):s;return d.createElement(z,N({},h,{"aria-current":H,className:O,ref:r,style:X,to:u,viewTransition:o}),typeof p=="function"?p(P):p)});process.env.NODE_ENV!=="production"&&(we.displayName="NavLink");const ye=d.forwardRef((e,n)=>{let{fetcherKey:r,navigate:i,reloadDocument:t,replace:a,state:l,method:s=L,action:u,onSubmit:o,relative:p,preventScrollReset:h,viewTransition:v}=e,x=K(e,de),w=xe(),y=Ce(u,{relative:p}),E=s.toLowerCase()==="get"?"get":"post",b=c=>{if(o&&o(c),c.defaultPrevented)return;c.preventDefault();let m=c.nativeEvent.submitter,f=(m==null?void 0:m.getAttribute("formmethod"))||s;w(m||c.currentTarget,{fetcherKey:r,method:f,navigate:i,replace:a,state:l,relative:p,preventScrollReset:h,viewTransition:v})};return d.createElement("form",N({ref:n,method:E,action:y,onSubmit:t?o:b},x))});process.env.NODE_ENV!=="production"&&(ye.displayName="Form");process.env.NODE_ENV;var T;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(T||(T={}));var B;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(B||(B={}));function Ee(e){return e+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function G(e){let n=d.useContext(ee);return n||(process.env.NODE_ENV!=="production"?g(!1,Ee(e)):g(!1)),n}function be(e,n){let{target:r,replace:i,state:t,preventScrollReset:a,relative:l,viewTransition:s}=n===void 0?{}:n,u=J(),o=I(),p=U(e,{relative:l});return d.useCallback(h=>{if(oe(h,r)){h.preventDefault();let v=i!==void 0?i:k(o)===k(p);u(e,{replace:v,state:t,preventScrollReset:a,relative:l,viewTransition:s})}},[o,u,p,i,t,r,e,a,l,s])}function Se(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let ge=0,Ne=()=>"__"+String(++ge)+"__";function xe(){let{router:e}=G(T.UseSubmit),{basename:n}=d.useContext(_),r=Z();return d.useCallback(function(i,t){t===void 0&&(t={}),Se();let{action:a,method:l,encType:s,formData:u,body:o}=ue(i,n);if(t.navigate===!1){let p=t.fetcherKey||Ne();e.fetch(p,r,t.action||a,{preventScrollReset:t.preventScrollReset,formData:u,body:o,formMethod:t.method||l,formEncType:t.encType||s,flushSync:t.flushSync})}else e.navigate(t.action||a,{preventScrollReset:t.preventScrollReset,formData:u,body:o,formMethod:t.method||l,formEncType:t.encType||s,replace:t.replace,state:t.state,fromRouteId:r,flushSync:t.flushSync,viewTransition:t.viewTransition})},[e,n,r])}function Ce(e,n){let{relative:r}=n===void 0?{}:n,{basename:i}=d.useContext(_),t=d.useContext($);t||(process.env.NODE_ENV!=="production"?g(!1,"useFormAction must be used inside a RouteContext"):g(!1));let[a]=t.matches.slice(-1),l=N({},U(e||".",{relative:r})),s=I();if(e==null){l.search=s.search;let u=new URLSearchParams(l.search),o=u.getAll("index");if(o.some(h=>h==="")){u.delete("index"),o.filter(v=>v).forEach(v=>u.append("index",v));let h=u.toString();l.search=h?"?"+h:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:te([i,l.pathname])),k(l)}function Re(e,n){n===void 0&&(n={});let r=d.useContext(q);r==null&&(process.env.NODE_ENV!=="production"?g(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?"):g(!1));let{basename:i}=G(T.useViewTransitionState),t=U(e,{relative:n.relative});if(!r.isTransitioning)return!1;let a=S(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=S(r.nextLocation.pathname,i)||r.nextLocation.pathname;return W(t.pathname,l)!=null||W(t.pathname,a)!=null}export{z as L};
