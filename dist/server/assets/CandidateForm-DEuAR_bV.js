import{jsx as t,jsxs as l,Fragment as U}from"react/jsx-runtime";import{useState as u,useEffect as K}from"react";import{motion as oe}from"framer-motion";import{User as Se,AlertCircle as m,Mail as Pe,Phone as Fe,MapPin as ze,Globe as Y,Briefcase as M,GraduationCap as Te,Trash2 as ne,Laptop as ke,CheckCircle as de,PlusCircle as Le}from"lucide-react";import{toast as $,ToastContainer as Oe}from"react-toastify";import{useNavigate as Re}from"react-router";function je(){return t("div",{className:"fixed inset-0 flex items-center justify-center bg-white/70 backdrop-blur-sm z-50 mt-15",children:l("div",{className:"relative w-20 h-20",children:[t("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-600 animate-ping"}),t("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-700 animate-pulse"})]})})}function Be(){Re();const x=new URLSearchParams(window.location.search).get("jobId"),[S,z]=u([]),[T,X]=u(""),[me,B]=u(""),[j,G]=u([]),[g,k]=u({}),[ue,Z]=u(!1),[q,ee]=u(!1),[N,Q]=u(null),[s,h]=u({}),[te,pe]=u([]),[re,ae]=u([]),[he,C]=u(!1);K(()=>{(async()=>{try{const e=await api.get("/create_job/country-states/");pe(e.data.data)}catch(e){console.error("Error fetching countries:",e)}})()},[]);const[n,H]=u({fullName:"",email:"",phone:"",country:"",state:"",city:"",expectedCTC:"",totalExperience:"",github:"",linkedin:""}),[w,W]=u([{qualification:"",start:"",end:"",field:"",college:"",score:""}]),[E,J]=u([{role:"",org:"",location:"",ctc:"",highlights:""}]),[y,le]=u("No"),[L,fe]=u(""),[V,ge]=u(""),[I,se]=u([]),be=["Hindi","French","Spanish","German","English","Other"],xe=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),Ne=r=>/^[0-9]{10,15}$/.test(r.replace(/[\s+-]/g,""));K(()=>{if(S.length>0&&x){const r=S.find(e=>e.id===parseInt(x));r&&(X(r.id.toString()),B(r.title),ie(r.id),h(e=>({...e,role:""})))}},[S,x]),K(()=>{(async()=>{var e;try{C(!0);const i=(await api.get("/create_job/addjob/")).data;if((e=i.results)!=null&&e.data){const o=i.results.data.filter(d=>d.is_active);z(o)}}catch{$.error("Failed to fetch jobs. Please try again.")}finally{C(!1)}})()},[]);const ie=async r=>{Z(!0),C(!0),G([]),k({});try{const a=(await api.get(`/create_job/jobs/${r}/questions/`)).data;if(a.status==="success"&&a.data.length>0){const i=a.data.filter((d,f,b)=>b.findIndex(p=>p.label===d.label&&p.order===d.order&&p.section===d.section)===f);G(i);const o={};i.forEach(d=>{var f;d.question_type==="slider"?o[d.id]=((f=d.options)==null?void 0:f.min)||1:d.question_type==="multiselect"?o[d.id]=[]:o[d.id]=""}),k(o)}}catch{$.error("Failed to load questions")}finally{Z(!1),C(!1)}},ye=r=>{const e=r.target.value;if(X(e),e){h(i=>({...i,role:""}));const a=S.find(i=>i.id===parseInt(e));B(a?a.title:""),ie(e)}else B(""),G([]),k({})},O=(r,e,a)=>{if(a==="multiselect"){const i=g[r]||[];i.includes(e)?k({...g,[r]:i.filter(o=>o!==e)}):k({...g,[r]:[...i,e]})}else k({...g,[r]:e});h(i=>{const o={...i};return delete o[`question_${r}`],o})},v=r=>{const{name:e,value:a}=r.target;if(H(i=>({...i,[e]:a})),e==="country"){const i=te.find(o=>o.country_name===a);ae(i?i.states:[]),H(o=>({...o,state:""}))}},R=(r,e,a)=>{const i=[...w];i[r][e]=a,W(i),h(o=>{const d={...o};return delete d[`edu_${r}_${e}`],d})},A=(r,e,a)=>{const i=[...E];i[r][e]=a,J(i),h(o=>{const d={...o};return delete d[`exp_${r}_${e}`],d})},ve=()=>W([...w,{qualification:"",start:"",end:"",field:"",college:"",score:""}]),_e=r=>{w.length>1&&(W(w.filter((e,a)=>a!==r)),h(e=>{const a={...e};return Object.keys(a).forEach(i=>{i.startsWith(`edu_${r}_`)&&delete a[i]}),a}))},Ce=()=>J([...E,{role:"",org:"",location:"",ctc:"",highlights:""}]),we=r=>{E.length>1&&(J(E.filter((e,a)=>a!==r)),h(e=>{const a={...e};return Object.keys(a).forEach(i=>{i.startsWith(`exp_${r}_`)&&delete a[i]}),a}))},Ee=r=>{I.includes(r)?se(I.filter(e=>e!==r)):se([...I,r])},$e=()=>{const r={};return j.forEach(e=>{const a=g[e.id];if(e.question_type==="radio"&&e.label.toLowerCase().includes("experience")){const i=e.label.replace(/Do you have (?:any )?experience with /i,"").replace(/\?/g,"").trim();r[i]||(r[i]={}),r[i].experience=a||"No"}if(e.question_type==="slider"&&e.label.toLowerCase().includes("rate")){const i=e.label.replace(/Rate yourself in /i,"").trim();r[i]||(r[i]={}),r[i].rating=parseInt(a)||0}if((e.question_type==="text"||e.question_type==="textarea")&&a){const i=e.label;r[i]={experience:"Yes",details:a}}if(e.question_type==="multiselect"&&a&&a.length>0){const i=e.label;r[i]={experience:"Yes",skills:a}}if(e.question_type==="select"&&a){const i=e.label;r[i]={experience:"Yes",value:a}}}),r},De=()=>{const r={};if(T||(r.role="Please select a role"),n.fullName.trim()?n.fullName.trim().length<2?r.fullName="Name must be at least 2 characters":/^[a-zA-Z\s]+$/.test(n.fullName)||(r.fullName="Name should contain only letters"):r.fullName="Full name is required",n.email?xe(n.email)||(r.email="Invalid email format"):r.email="Email is required",n.phone?Ne(n.phone)||(r.phone="Phone must be 10-15 digits"):r.phone="Phone number is required",n.expectedCTC&&(isNaN(n.expectedCTC)||parseFloat(n.expectedCTC)<0)&&(r.expectedCTC="CTC must be a positive number"),n.totalExperience&&(isNaN(n.totalExperience)||parseFloat(n.totalExperience)<0)&&(r.totalExperience="Experience must be a positive number"),w.forEach((e,a)=>{(e.qualification||e.field||e.college)&&(e.qualification||(r[`edu_${a}_qualification`]="Qualification is required"),e.field||(r[`edu_${a}_field`]="Field of study is required"),e.score&&(isNaN(e.score)||parseFloat(e.score)<0||parseFloat(e.score)>100)&&(r[`edu_${a}_score`]="Score must be between 0-100"),e.start&&e.end&&new Date(e.start)>new Date(e.end)&&(r[`edu_${a}_end`]="End date must be after start date"))}),E.forEach((e,a)=>{(e.role||e.org||e.ctc)&&(e.role||(r[`exp_${a}_role`]="Role is required"),e.org||(r[`exp_${a}_org`]="Organization is required"),e.ctc&&(isNaN(e.ctc)||parseFloat(e.ctc)<0)&&(r[`exp_${a}_ctc`]="CTC must be a positive number"))}),y==="Yes"&&!V&&(r.lastWorkingDay="Please specify last working day"),y==="No"&&!L?r.noticePeriodDays="Please specify notice period duration":y==="No"&&L&&(isNaN(L)||parseInt(L)<0)&&(r.noticePeriodDays="Notice period must be a positive number"),N){const e=[".pdf",".doc",".docx"],a=N.name.substring(N.name.lastIndexOf(".")).toLowerCase();e.includes(a)||(r.cvFile="Only PDF, DOC, or DOCX files are allowed"),N.size>5*1024*1024&&(r.cvFile="File size must be less than 5MB")}return j.forEach(e=>{if(e.required){const a=g[e.id];(!a||Array.isArray(a)&&a.length===0||a==="")&&(r[`question_${e.id}`]="This field is required")}}),h(r),Object.keys(r).length===0};return l(U,{children:[he&&t(je,{}),t("div",{className:"min-h-screen bg-gradient-to-r from-emerald-50 via-white to-emerald-50 p-6 text-sm",children:t("div",{className:"max-w-4xl mx-auto bg-white shadow-lg rounded-xl p-6 border border-gray-200",children:l("form",{onSubmit:async r=>{var e;if(r.preventDefault(),!De()){$.error("Please fix the errors in the form before submitting.");const a=document.querySelector(".border-red-500");a&&a.scrollIntoView({behavior:"smooth",block:"center"});return}ee(!0),C(!0);try{const a=new Date,o=new Date(a.getTime()+5.5*60*60*1e3).toISOString().replace("T"," ").substring(0,19)+" IST",d={Name:n.fullName,Email:n.email,Phone:n.phone,Country:n.country||"",State:n.state||"",Location:n.city||"",Role_Type:me,status:"Scouting","Languages Known":I,Expected_CTC_INR:n.expectedCTC||"10",Total_Experience:n.totalExperience||"0",GitHub_Profile:n.github||"",LinkedIn_Profile:n.linkedin||"",Education_History:w.map(c=>({Qualification:c.qualification,Specialisation:c.field,University:c.college,Start_Date:c.start,End_Date:c.end,Score:c.score,Currently_Studying:!1})),Professional_Experience:E.map(c=>({Role:c.role,Organisation:c.org,Location:c.location,Start_Date:"",End_Date:null,CTC_INR:c.ctc,Is_Current:!0,Responsibilities:c.highlights})),"Serving Notice Period":y,"Notice Period Days":y==="No"&&parseInt(L)||null,"Last Working Day":y==="Yes"?V:null,Tech_Experience:$e(),Submitted_At_IST:o},f=new FormData;f.append("form_name","gxi_form"),f.append("submission_data",JSON.stringify(d)),N instanceof File&&f.append("cv_upload",N,N.name),console.log("ðŸ“¦ FormData Contents:");for(let c of f.entries())c[1]instanceof File?console.log(`${c[0]}: [File: ${c[1].name}]`):console.log(`${c[0]}:`,c[1]);const b=await fetch("http://3.85.242.139:8003/api/form_data/public/submit-form/",{method:"POST",body:f}),p=await b.json();if(console.log("âœ… SERVER RESPONSE:",p),!b.ok)throw new Error(p.message||JSON.stringify(p.errors||p));$.success("Candidate submitted successfully!")}catch(a){console.error("âŒ Submission Error:",a),console.error("âŒ Error Response:",(e=a.response)==null?void 0:e.data),$.error(`Submission failed: ${a.message}`)}finally{ee(!1),C(!1)}},noValidate:!0,children:[l("div",{className:"flex justify-between ",children:[t("input",{type:"file",id:"resumeUpload",accept:".pdf,.doc,.docx",className:"hidden",onChange:async r=>{var a,i;const e=r.target.files[0];if(e){C(!0);try{const o=new FormData;o.append("resume",e);const f=await(await fetch("http://3.85.242.139:8003/api/create_job/resume-ai-parse/",{method:"POST",body:o})).json();if(console.log("Resume Parsed:",f),!f.parsed){$.error("Failed to parse resume.");return}const b=f.parsed;H(p=>{var c;return{...p,fullName:b.name||"",email:b.email||"",phone:b.phone||"",totalExperience:((c=b.total_experience)==null?void 0:c.replace("years","").trim())||""}}),((a=b.education)==null?void 0:a.length)>0&&W(b.education.map(p=>({qualification:p.degree||"",field:"",college:p.university||"",start:"",end:"",score:""}))),((i=b.experience)==null?void 0:i.length)>0&&J(b.experience.map(p=>({role:p.role||"",org:p.company||"",location:"",ctc:"",highlights:p.description||""}))),$.success("Resume parsed and form auto-filled.")}catch{$.error("Error uploading resume.")}finally{C(!1)}}}}),t("label",{htmlFor:"resumeUpload",className:"cursor-pointer bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-1 rounded-md text-sm shadow flex items-center ",children:"Upload Resume (Auto-Fill)"})]}),t(_,{icon:t(Se,{className:"text-emerald-500"}),title:"Personal Information"}),l("div",{className:"grid grid-cols-2 gap-4 ",children:[l("div",{children:[t("label",{className:"text-xs font-medium text-gray-700",children:"Select Role *"}),l("select",{className:`w-full border ${s.role?"border-red-500":"border-emerald-300"} px-2 py-2 rounded-md mt-1 bg-white text-sm focus:border-emerald-600 focus:outline-none`,value:T,onChange:ye,required:!0,children:[t("option",{value:"",children:"Select a role"}),S.map(r=>t("option",{value:r.id,children:r.title},r.id)),t("option",{value:"2",children:"Business Analyst"}),t("option",{value:"17",children:"Optimization Engineer"}),t("option",{value:"19",children:"Software Development Engineer (SDE)"}),t("option",{value:"1",children:"Software Development Engineer in Testing (SDET)"})]}),s.role&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s.role]})]}),t(D,{label:"Full Name",name:"fullName",value:n.fullName,onChange:v,placeholder:"Enter full name",error:s.fullName,required:!0}),t(D,{label:"Email ID",name:"email",type:"email",value:n.email,onChange:v,icon:t(Pe,{size:14}),placeholder:"email@example.com",error:s.email,required:!0}),t(D,{label:"Phone Number",name:"phone",type:"tel",value:n.phone,onChange:v,icon:t(Fe,{size:14}),placeholder:"+91 XXXXX XXXXX",error:s.phone,required:!0}),l("div",{children:[t("label",{className:"text-xs font-medium text-gray-700",children:"Country"}),l("select",{name:"country",value:n.country,onChange:v,className:`w-full border ${s.country?"border-red-500":"border-emerald-300"} px-2 py-2 rounded-md mt-1 bg-white text-sm`,children:[t("option",{value:"",children:"Select Country"}),te.map(r=>t("option",{value:r.country_name,children:r.country_name},r.id))]}),s.country&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s.country]})]}),l("div",{children:[t("label",{className:"text-xs font-medium text-gray-700",children:"State"}),l("select",{name:"state",value:n.state,onChange:v,className:`w-full border focus:border-emerald-600 ${s.state?"border-red-500":"border-emerald-300"} px-2 py-2 rounded-md mt-1 bg-white text-sm`,children:[t("option",{value:"",children:"Select State"}),re.length===0?t("option",{disabled:!0,children:"No states available"}):re.map(r=>t("option",{value:r.state_name,children:r.state_name},r.id))]}),s.state&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s.state]})]}),t("div",{className:"col-span-2",children:t(D,{label:"City / Location",name:"city",value:n.city,onChange:v,icon:t(ze,{size:14}),placeholder:"Mumbai, India",error:s.city})})]}),t(P,{}),t(_,{icon:t(Y,{className:"text-emerald-500"}),title:"Languages"}),t("div",{className:"flex flex-wrap gap-2 mt-3 text-xs",children:be.map(r=>t("span",{onClick:()=>Ee(r),className:`px-3 py-1 rounded-full cursor-pointer border text-xs transition
                  ${I.includes(r)?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-700 border-gray-300 hover:border-emerald-400"}
                `,children:r},r))}),l("div",{className:"grid grid-cols-2 gap-6",children:[l("div",{className:"flex flex-col",children:[t(_,{icon:t(M,{className:"text-emerald-500"}),title:"Expected CTC (in Lakhs)"}),t(D,{name:"expectedCTC",type:"number",value:n.expectedCTC,onChange:v,placeholder:"Enter expected CTC",error:s.expectedCTC,min:"0",step:"1"})]}),l("div",{className:"flex flex-col",children:[t(_,{icon:t(M,{className:"text-emerald-500"}),title:"Total Experience (in Years)"}),t(D,{name:"totalExperience",type:"number",value:n.totalExperience,onChange:v,placeholder:"Enter total experience",error:s.totalExperience,min:"0",step:"1"})]})]}),l("div",{className:"grid grid-cols-2 gap-6",children:[l("div",{className:"flex flex-col",children:[t(_,{icon:t(Y,{className:"text-emerald-500"}),title:"GitHub Profile Link"}),t(D,{name:"github",type:"url",value:n.github||"",onChange:v,placeholder:"https://github.com/username",error:s.github})]}),l("div",{className:"flex flex-col",children:[t(_,{icon:t(Y,{className:"text-emerald-500"}),title:"LinkedIn Profile Link"}),t(D,{name:"linkedin",type:"url",value:n.linkedin||"",onChange:v,placeholder:"https://www.linkedin.com/in/username",error:s.linkedin})]})]}),t(P,{}),t(_,{icon:t(Te,{className:"text-emerald-500"}),title:"Education Details"}),w.map((r,e)=>l("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 mt-3 relative",children:[w.length>1&&t("div",{className:"absolute right-2 top-2 cursor-pointer",onClick:()=>_e(e),children:t(ne,{size:14,className:"text-red-500 hover:text-red-700"})}),l("h3",{className:"font-medium text-gray-700 mb-2",children:["Education #",e+1]}),l("div",{className:"grid grid-cols-2 gap-4",children:[l("div",{children:[t("input",{placeholder:"Qualification",value:r.qualification,onChange:a=>R(e,"qualification",a.target.value),className:`w-full p-2 border ${s[`edu_${e}_qualification`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`edu_${e}_qualification`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`edu_${e}_qualification`]]})]}),l("div",{children:[t("input",{placeholder:"Field of Study",value:r.field,onChange:a=>R(e,"field",a.target.value),className:`w-full p-2 border ${s[`edu_${e}_field`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`edu_${e}_field`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`edu_${e}_field`]]})]}),t("input",{type:"date",placeholder:"Start Date",value:r.start,onChange:a=>R(e,"start",a.target.value),className:"p-2 border border-emerald-300 rounded-md text-sm focus:border-emerald-600 focus:outline-none"}),l("div",{children:[t("input",{type:"date",placeholder:"End Date",value:r.end,onChange:a=>R(e,"end",a.target.value),className:`w-full p-2 border ${s[`edu_${e}_end`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`edu_${e}_end`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`edu_${e}_end`]]})]}),t("input",{placeholder:"College / University",value:r.college,onChange:a=>R(e,"college",a.target.value),className:"col-span-2 p-2 border border-emerald-300 rounded-md text-sm focus:border-emerald-600 focus:outline-none"}),l("div",{className:"col-span-2",children:[t("input",{placeholder:"Percentage / CGPA",value:r.score,onChange:a=>R(e,"score",a.target.value),className:`w-full p-2 border ${s[`edu_${e}_score`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`edu_${e}_score`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`edu_${e}_score`]]})]})]})]},e)),t(ce,{label:"Add Education",onClick:ve}),t(P,{}),t(_,{icon:t(M,{className:"text-emerald-500"}),title:"Professional Details"}),E.map((r,e)=>l("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 mt-3 relative",children:[E.length>1&&t("div",{className:"absolute right-2 top-2 cursor-pointer",onClick:()=>we(e),children:t(ne,{size:14,className:"text-red-500 hover:text-red-700"})}),l("h3",{className:"font-medium text-gray-700 mb-2",children:["Experience #",e+1]}),l("div",{className:"grid grid-cols-2 gap-4",children:[l("div",{children:[t("input",{placeholder:"Role / Designation",value:r.role,onChange:a=>A(e,"role",a.target.value),className:`w-full p-2 border ${s[`exp_${e}_role`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`exp_${e}_role`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`exp_${e}_role`]]})]}),l("div",{children:[t("input",{placeholder:"Organisation",value:r.org,onChange:a=>A(e,"org",a.target.value),className:`w-full p-2 border ${s[`exp_${e}_org`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`exp_${e}_org`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`exp_${e}_org`]]})]}),t("input",{placeholder:"Location (City, Country)",value:r.location,onChange:a=>A(e,"location",a.target.value),className:"col-span-2 p-2 border border-emerald-300 rounded-md text-sm focus:border-emerald-600 focus:outline-none"}),l("div",{className:"col-span-2",children:[t("input",{placeholder:"Current / Last CTC (INR)",value:r.ctc,onChange:a=>A(e,"ctc",a.target.value),className:`w-full p-2 border ${s[`exp_${e}_ctc`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s[`exp_${e}_ctc`]&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),s[`exp_${e}_ctc`]]})]}),t("textarea",{placeholder:"Key Responsibilities",value:r.highlights,onChange:a=>A(e,"highlights",a.target.value),className:"col-span-2 p-2 border border-emerald-300 rounded-md text-sm focus:border-emerald-600 focus:outline-none h-20"})]})]},e)),t(ce,{label:"Add Experience",onClick:Ce}),t(P,{}),T&&l(U,{children:[l(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"rounded-lg mb-6",children:[l("div",{className:"flex items-center gap-3 mb-4",children:[t(ke,{size:24,className:"text-emerald-500"}),t("h2",{className:"text-xl font-bold text-gray-800",children:"Role-Based Skills Assessment"})]}),ue?t("div",{className:"text-center py-8 text-gray-500",children:"Loading questions..."}):j.length===0?t("div",{className:"text-center py-8 text-gray-400",children:"No questions available for this role."}):t("div",{className:"space-y-6",children:[...new Set(j.map(r=>r.section))].map(r=>l("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l("div",{className:"flex items-center gap-2 mb-4",children:[t("div",{className:"w-8 h-8 bg-emerald-600 rounded flex items-center justify-center text-white text-sm font-bold",children:r.charAt(0)}),t("h3",{className:"text-lg font-semibold text-gray-700",children:r})]}),t("div",{className:"space-y-4",children:j.filter(e=>e.section===r).sort((e,a)=>e.order-a.order).map(e=>l("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[l("label",{className:"text-sm font-medium text-gray-700 block mb-3",children:[e.label,e.required&&t("span",{className:"text-red-500 ml-1",children:"*"})]}),e.question_type==="radio"&&e.options&&l("div",{children:[t("div",{className:"flex gap-6",children:Object.entries(e.options).map(([a,i])=>l("label",{className:"flex items-center gap-2 cursor-pointer",children:[t("input",{type:"radio",name:`question-${e.id}`,value:a,checked:g[e.id]===a,onChange:o=>O(e.id,o.target.value,"radio"),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500",required:e.required}),t("span",{className:"text-sm text-gray-700",children:i})]},a))}),s[`question_${e.id}`]&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s[`question_${e.id}`]]})]}),e.question_type==="select"&&e.options&&l("div",{children:[l("select",{value:g[e.id]||"",onChange:a=>O(e.id,a.target.value,"select"),className:`w-full p-2 border ${s[`question_${e.id}`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none bg-white`,required:e.required,children:[t("option",{value:"",children:"-- Select an option --"}),Object.entries(e.options).map(([a,i])=>t("option",{value:a,children:i},a))]}),s[`question_${e.id}`]&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s[`question_${e.id}`]]})]}),e.question_type==="slider"&&e.options&&l("div",{className:"space-y-2",children:[l("div",{className:"flex justify-between text-xs text-gray-600",children:[l("span",{children:["Min: ",e.options.min]}),l("span",{className:"font-bold text-emerald-600",children:["Selected: ",g[e.id]||e.options.min]}),l("span",{children:["Max: ",e.options.max]})]}),t("input",{type:"range",min:e.options.min,max:e.options.max,value:g[e.id]||e.options.min,onChange:a=>O(e.id,a.target.value,"slider"),className:"w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-emerald-600"})]}),e.question_type==="multiselect"&&e.options&&l("div",{children:[t("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.options).map(([a,i])=>{const o=(g[e.id]||[]).includes(a);return t("button",{type:"button",onClick:()=>O(e.id,a,"multiselect"),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${o?"bg-emerald-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:i},a)})}),s[`question_${e.id}`]&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s[`question_${e.id}`]]})]}),e.question_type==="text"&&l("div",{children:[t("input",{type:"text",value:g[e.id]||"",onChange:a=>O(e.id,a.target.value,"text"),className:`w-full p-2 border ${s[`question_${e.id}`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`,placeholder:"Enter your answer...",required:e.required}),s[`question_${e.id}`]&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s[`question_${e.id}`]]})]}),e.question_type==="textarea"&&l("div",{children:[t("textarea",{value:g[e.id]||"",onChange:a=>O(e.id,a.target.value,"textarea"),className:`w-full p-2 border ${s[`question_${e.id}`]?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none h-24 resize-none`,placeholder:"Enter your answer...",required:e.required}),s[`question_${e.id}`]&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s[`question_${e.id}`]]})]})]},e.id))})]},r))})]}),t(P,{})]}),t(_,{icon:t(Y,{className:"text-emerald-500"}),title:"Availability"}),l("div",{className:"mt-3",children:[t("label",{className:"font-medium text-gray-700 text-xs",children:"Serving Notice Period?"}),l("div",{className:"flex gap-4 mt-2 text-gray-600 text-sm",children:[l("label",{className:"flex items-center gap-1 cursor-pointer",children:[t("input",{type:"radio",className:"text-emerald-600 accent-emerald-600 focus:ring-emerald-600",checked:y==="Yes",onChange:()=>{le("Yes"),h(r=>({...r,noticePeriodDays:""}))}}),"Yes"]}),l("label",{className:"flex items-center gap-1 cursor-pointer",children:[t("input",{type:"radio",className:"text-emerald-600 accent-emerald-600 focus:ring-emerald-600",checked:y==="No",onChange:()=>{le("No"),h(r=>({...r,lastWorkingDay:""}))}}),"No"]})]}),y==="Yes"&&l("div",{className:"mt-3",children:[t("label",{className:"font-medium text-gray-700 text-xs",children:"Last Working Day : "}),t("input",{type:"date",value:V,onChange:r=>{ge(r.target.value),h(e=>({...e,lastWorkingDay:""}))},className:`mt-1 w-1/3 p-2 ml-2 border ${s.lastWorkingDay?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`}),s.lastWorkingDay&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s.lastWorkingDay]})]}),y==="No"&&l("div",{className:"mt-3",children:[t("label",{className:"font-medium text-gray-700 text-xs",children:"Notice Period Duration (in Days) :"}),t("input",{type:"number",value:L,onChange:r=>{fe(r.target.value),r.target.value&&(isNaN(r.target.value)||parseInt(r.target.value)<0)?h(e=>({...e,noticePeriodDays:"Must be a positive number"})):h(e=>({...e,noticePeriodDays:""}))},className:`mt-1 w-40 p-2 ml-2 border ${s.noticePeriodDays?"border-red-500":"border-emerald-300"} rounded-md text-sm focus:border-emerald-600 focus:outline-none`,placeholder:"e.g., 30",min:"0"}),s.noticePeriodDays&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s.noticePeriodDays]})]})]}),t(P,{}),t(_,{icon:t(M,{className:"text-emerald-500"}),title:"Upload CV (PDF / DOCX)"}),l("div",{className:"mt-3",children:[t("input",{type:"file",accept:".pdf,.doc,.docx",required:!0,onChange:r=>{const e=r.target.files[0];if(e){if(e.size>5*1024*1024){h(o=>({...o,cvFile:"File size must be less than 5MB"})),r.target.value=null,Q(null);return}const a=[".pdf",".doc",".docx"],i=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if(!a.includes(i)){h(o=>({...o,cvFile:"Only PDF, DOC, or DOCX files are allowed"})),r.target.value=null,Q(null);return}h(o=>({...o,cvFile:""})),Q(e)}},className:`border ${s.cvFile?"border-red-500":"border-emerald-300"} p-2 rounded-md text-sm`}),N&&!s.cvFile&&l("p",{className:"text-xs mt-2 text-emerald-700 flex items-center gap-2",children:[t(de,{size:14}),"Selected: ",t("strong",{children:N.name})," (",(N.size/1024).toFixed(2)," KB)"]}),s.cvFile&&l("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t(m,{size:12}),s.cvFile]})]}),t(P,{}),Object.keys(s).length>0&&l("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[l("div",{className:"flex items-center gap-2 mb-2",children:[t(m,{size:16,className:"text-red-600"}),t("h3",{className:"font-semibold text-red-800 text-sm",children:"Please fill all required fields correctly:"})]}),t("ul",{className:"list-disc list-inside text-xs text-red-700 space-y-1",children:Object.entries(s).map(([r,e])=>e&&t("li",{children:e},r))})]}),t("div",{className:"flex justify-end mt-2",children:t(oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:q,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-lg text-sm font-medium shadow-md flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:q?l(U,{children:[t("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):l(U,{children:[t(de,{size:16})," Submit Candidate"]})})})]})})}),t(Oe,{className:"mt-8"})]})}const _=({icon:F,title:x})=>l("div",{className:"flex items-center gap-2 mt-6",children:[t("div",{className:"text-[#0f3b2f] text-lg",children:F}),t("h2",{className:"text-lg font-semibold text-[#0f3b2f]",children:x})]}),P=()=>t("hr",{className:"my-6 border-gray-200"}),D=({label:F,icon:x,className:S,error:z,required:T,...X})=>l("div",{className:S,children:[l("label",{className:"text-xs font-medium text-gray-700",children:[F," ",T&&t("span",{className:"text-red-500",children:"*"})]}),l("div",{className:`flex items-center border ${z?"border-red-500":"border-emerald-300"} px-2 py-1 rounded-md mt-1 bg-white focus-within:border-2 ${z?"focus-within:border-red-600":"focus-within:border-emerald-600"}`,children:[x&&t("div",{className:"mr-2 text-gray-500",children:x}),t("input",{className:"w-full outline-none text-gray-800 text-sm",required:T,...X})]}),z&&l("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[t(m,{size:12}),z]})]}),ce=({label:F,onClick:x})=>l("button",{type:"button",onClick:x,className:"flex items-center gap-1 bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-1.5 rounded-md mt-3 text-xs shadow",children:[t(Le,{size:14})," ",F]});export{Be as default};
